warning: in the working copy of 'Macro/Views/TeachingView.xaml', LF will be replaced by CRLF the next time Git touches it
diff --git a/Macro/Views/TeachingView.xaml b/Macro/Views/TeachingView.xaml
index d1b3501..13cc424 100644
--- a/Macro/Views/TeachingView.xaml
+++ b/Macro/Views/TeachingView.xaml
@@ -187,10 +187,11 @@
                         <ComboBoxItem Content="=="/><ComboBoxItem Content="!="/><ComboBoxItem Content="&gt;"/><ComboBoxItem Content="&lt;"/><ComboBoxItem Content="&gt;="/><ComboBoxItem Content="&lt;="/><ComboBoxItem Content="Contains"/>
                     </ComboBox>
                 </Grid>
-                <DockPanel LastChildFill="True" Margin="0,0,0,10">
+                <Grid Margin="0,0,0,5">
+                    <Grid.ColumnDefinitions><ColumnDefinition Width="Auto"/><ColumnDefinition Width="*"/></Grid.ColumnDefinitions>
                     <TextBlock Text="ê°’:" VerticalAlignment="Center" Width="70"/>
-                    <TextBox Text="{Binding TargetValue, UpdateSourceTrigger=PropertyChanged}"/>
-                </DockPanel>
+                    <controls:DynamicStringInput Grid.Column="1" Value="{Binding TargetValue}" VariableName="{Binding TargetValueVariableName}" SourceType="{Binding TargetValueSourceType}" VariableSource="{Binding DataContext.AvailableIntVariables, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
+                </Grid>
                 <DockPanel>
                     <TextBlock Text="ì´ë™ (True):" VerticalAlignment="Center" Width="140" Foreground="#2E7D32" FontWeight="Bold"/>
                     <components:JumpTargetSelector ItemsSource="{Binding DataContext.JumpTargets, RelativeSource={RelativeSource AncestorType=UserControl}}" SelectedId="{Binding FailJumpId, Mode=TwoWay}"/>
@@ -346,9 +347,120 @@
             </StackPanel>
         </DataTemplate>
 
-        <!-- Other actions (KeyPress, TextType, VariableSet, WindowControl, MultiAction) omitted but should be present. Using simplified placeholders for brevity in this single file rewrite, but ensuring core structure is correct. -->
-        <!-- Just restoring the essential layout structure now. The full templates are safe in previous context or can be copy-pasted if needed. -->
-        
+        <DataTemplate DataType="{x:Type models:KeyPressAction}">
+            <StackPanel Margin="5">
+                <DockPanel Margin="0,0,0,5">
+                    <TextBlock Text="í‚¤:" Width="80"/>
+                    <TextBox Text="{Binding KeyCode, UpdateSourceTrigger=PropertyChanged}"/>
+                </DockPanel>
+                <DockPanel Margin="0,0,0,5">
+                    <TextBlock Text="ëˆ„ë¦„ ì‹œê°„:" Width="80"/>
+                    <TextBox Text="{Binding PressDuration, UpdateSourceTrigger=PropertyChanged}"/>
+                    <TextBlock Text="ms" Margin="5,0,0,0"/>
+                </DockPanel>
+                <DockPanel>
+                    <TextBlock Text="ì‹¤íŒ¨ ì‹œ:" Width="80"/>
+                    <components:JumpTargetSelector ItemsSource="{Binding DataContext.JumpTargets, RelativeSource={RelativeSource AncestorType=UserControl}}" SelectedId="{Binding FailJumpId, Mode=TwoWay}"/>
+                </DockPanel>
+            </StackPanel>
+        </DataTemplate>
+
+        <DataTemplate DataType="{x:Type models:TextTypeAction}">
+            <StackPanel Margin="5">
+                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
+                    <RadioButton Content="ì§ì ‘" GroupName="TT1" IsChecked="{Binding InputMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Direct}" Margin="0,0,10,0"/>
+                    <RadioButton Content="ë³€ìˆ˜" GroupName="TT1" IsChecked="{Binding InputMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Variable}"/>
+                </StackPanel>
+                <DockPanel Margin="0,0,0,5">
+                    <DockPanel.Style>
+                        <Style TargetType="DockPanel">
+                            <Setter Property="Visibility" Value="Visible"/>
+                            <Style.Triggers>
+                                <DataTrigger Binding="{Binding InputMode}" Value="Variable">
+                                    <Setter Property="Visibility" Value="Collapsed"/>
+                                </DataTrigger>
+                            </Style.Triggers>
+                        </Style>
+                    </DockPanel.Style>
+                    <TextBlock Text="í…ìŠ¤íŠ¸:" Width="80"/>
+                    <TextBox Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}" AcceptsReturn="True" MinHeight="40"/>
+                </DockPanel>
+                <DockPanel Margin="0,0,0,5">
+                    <DockPanel.Style>
+                        <Style TargetType="DockPanel">
+                            <Setter Property="Visibility" Value="Collapsed"/>
+                            <Style.Triggers>
+                                <DataTrigger Binding="{Binding InputMode}" Value="Variable">
+                                    <Setter Property="Visibility" Value="Visible"/>
+                                </DataTrigger>
+                            </Style.Triggers>
+                        </Style>
+                    </DockPanel.Style>
+                    <TextBlock Text="ë³€ìˆ˜ëª…:" Width="80"/>
+                    <components:VariableSelector ItemsSource="{Binding DataContext.AvailableIntVariables, RelativeSource={RelativeSource AncestorType=UserControl}}" Text="{Binding VariableName, Mode=TwoWay}"/>
+                </DockPanel>
+                <DockPanel Margin="0,0,0,5">
+                    <TextBlock Text="ìž…ë ¥ ê°„ê²©:" Width="80"/>
+                    <TextBox Text="{Binding IntervalMs, UpdateSourceTrigger=PropertyChanged}"/>
+                    <TextBlock Text="ms" Margin="5,0,0,0"/>
+                </DockPanel>
+                <DockPanel>
+                    <TextBlock Text="ì‹¤íŒ¨ ì‹œ:" Width="80"/>
+                    <components:JumpTargetSelector ItemsSource="{Binding DataContext.JumpTargets, RelativeSource={RelativeSource AncestorType=UserControl}}" SelectedId="{Binding FailJumpId, Mode=TwoWay}"/>
+                </DockPanel>
+            </StackPanel>
+        </DataTemplate>
+
+        <DataTemplate DataType="{x:Type models:VariableSetAction}">
+            <StackPanel Margin="5">
+                <DockPanel Margin="0,0,0,5">
+                    <TextBlock Text="ë³€ìˆ˜ëª…:" Width="80"/>
+                    <components:VariableSelector ItemsSource="{Binding DataContext.AvailableIntVariables, RelativeSource={RelativeSource AncestorType=UserControl}}" Text="{Binding VariableName, Mode=TwoWay}"/>
+                </DockPanel>
+                <DockPanel Margin="0,0,0,5">
+                    <TextBlock Text="ì—°ì‚°:" Width="80"/>
+                    <ComboBox SelectedValue="{Binding Operation}" SelectedValuePath="Content">
+                        <ComboBoxItem Content="Set"/>
+                        <ComboBoxItem Content="Add"/>
+                        <ComboBoxItem Content="Sub"/>
+                    </ComboBox>
+                </DockPanel>
+                <DockPanel Margin="0,0,0,5">
+                    <TextBlock Text="ê°’:" Width="80"/>
+                    <TextBox Text="{Binding Value, UpdateSourceTrigger=PropertyChanged}"/>
+                </DockPanel>
+                <DockPanel>
+                    <TextBlock Text="ì‹¤íŒ¨ ì‹œ:" Width="80"/>
+                    <components:JumpTargetSelector ItemsSource="{Binding DataContext.JumpTargets, RelativeSource={RelativeSource AncestorType=UserControl}}" SelectedId="{Binding FailJumpId, Mode=TwoWay}"/>
+                </DockPanel>
+            </StackPanel>
+        </DataTemplate>
+
+        <DataTemplate DataType="{x:Type models:WindowControlAction}">
+            <StackPanel Margin="5">
+                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
+                    <RadioButton Content="í”„ë¡œì„¸ìŠ¤ëª…" GroupName="WC1" IsChecked="{Binding SearchMethod, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=ProcessName}" Margin="0,0,10,0"/>
+                    <RadioButton Content="ìœˆë„ìš°íƒ€ì´í‹€" GroupName="WC1" IsChecked="{Binding SearchMethod, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=WindowTitle}"/>
+                </StackPanel>
+                <DockPanel Margin="0,0,0,5">
+                    <TextBlock Text="ëŒ€ìƒ:" Width="80"/>
+                    <components:VariableSelector ItemsSource="{Binding DataContext.ProcessList, RelativeSource={RelativeSource AncestorType=UserControl}}" Text="{Binding TargetName, Mode=TwoWay}"/>
+                </DockPanel>
+                <DockPanel Margin="0,0,0,5">
+                    <TextBlock Text="ì°½ ìƒíƒœ:" Width="80"/>
+                    <ComboBox SelectedValue="{Binding WindowState}" SelectedValuePath="Tag">
+                        <ComboBoxItem Content="ìµœëŒ€í™”" Tag="{x:Static models:WindowControlState.Maximize}"/>
+                        <ComboBoxItem Content="ìµœì†Œí™”" Tag="{x:Static models:WindowControlState.Minimize}"/>
+                        <ComboBoxItem Content="ë³µì›" Tag="{x:Static models:WindowControlState.Restore}"/>
+                    </ComboBox>
+                </DockPanel>
+                <DockPanel>
+                    <TextBlock Text="ì‹¤íŒ¨ ì‹œ:" Width="80"/>
+                    <components:JumpTargetSelector ItemsSource="{Binding DataContext.JumpTargets, RelativeSource={RelativeSource AncestorType=UserControl}}" SelectedId="{Binding FailJumpId, Mode=TwoWay}"/>
+                </DockPanel>
+            </StackPanel>
+        </DataTemplate>
+
         <!-- MultiAction (Recursive) -->
         <DataTemplate DataType="{x:Type models:MultiAction}">
             <StackPanel Margin="5">
@@ -501,6 +613,62 @@
                         <TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}"/>
                     </DockPanel>
                     
+                    <!-- Group Variables -->
+                    <GroupBox Header="ê·¸ë£¹ ë³€ìˆ˜ (Local Variables)" Margin="0,0,0,15" Padding="5">
+                        <TabControl Height="200">
+                            <TabItem Header="ì¢Œí‘œ (Coordinate)">
+                                <DockPanel LastChildFill="True">
+                                    <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,5,0,0">
+                                        <Button Content="+ ì¢Œí‘œ ë³€ìˆ˜ ì¶”ê°€" Command="{Binding DataContext.AddCoordinateVariableCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" Padding="10,2"/>
+                                    </StackPanel>
+                                    <DataGrid ItemsSource="{Binding Variables}" AutoGenerateColumns="False" CanUserAddRows="False" Background="White" BorderBrush="#DDD" BorderThickness="1">
+                                        <DataGrid.Columns>
+                                            <DataGridTextColumn Header="ì´ë¦„" Binding="{Binding Name}" Width="80"/>
+                                            <DataGridTextColumn Header="X" Binding="{Binding X}" Width="40"/>
+                                            <DataGridTextColumn Header="Y" Binding="{Binding Y}" Width="40"/>
+                                            <DataGridTemplateColumn Header="ðŸ“" Width="30">
+                                                <DataGridTemplateColumn.CellTemplate>
+                                                    <DataTemplate>
+                                                        <Button Content="ðŸ“" Command="{Binding DataContext.PickVariableCoordinateCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding .}" ToolTip="ìœ„ì¹˜ í”½ì—…"/>
+                                                    </DataTemplate>
+                                                </DataGridTemplateColumn.CellTemplate>
+                                            </DataGridTemplateColumn>
+                                            <DataGridTextColumn Header="ì„¤ëª…" Binding="{Binding Description}" Width="*"/>
+                                            <DataGridTemplateColumn Width="30">
+                                                <DataGridTemplateColumn.CellTemplate>
+                                                    <DataTemplate>
+                                                        <Button Content="-" Command="{Binding DataContext.RemoveCoordinateVariableCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding .}" Foreground="Red" ToolTip="ì‚­ì œ"/>
+                                                    </DataTemplate>
+                                                </DataGridTemplateColumn.CellTemplate>
+                                            </DataGridTemplateColumn>
+                                        </DataGrid.Columns>
+                                    </DataGrid>
+                                </DockPanel>
+                            </TabItem>
+                            <TabItem Header="ì •ìˆ˜ (Integer)">
+                                <DockPanel LastChildFill="True">
+                                    <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,5,0,0">
+                                        <Button Content="+ ì •ìˆ˜ ë³€ìˆ˜ ì¶”ê°€" Command="{Binding DataContext.AddIntVariableCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" Padding="10,2"/>
+                                    </StackPanel>
+                                    <DataGrid ItemsSource="{Binding IntVariables}" AutoGenerateColumns="False" CanUserAddRows="False" Background="White" BorderBrush="#DDD" BorderThickness="1">
+                                        <DataGrid.Columns>
+                                            <DataGridTextColumn Header="ì´ë¦„" Binding="{Binding Name}" Width="100"/>
+                                            <DataGridTextColumn Header="ê°’" Binding="{Binding Value}" Width="60"/>
+                                            <DataGridTextColumn Header="ì„¤ëª…" Binding="{Binding Description}" Width="*"/>
+                                            <DataGridTemplateColumn Width="30">
+                                                <DataGridTemplateColumn.CellTemplate>
+                                                    <DataTemplate>
+                                                        <Button Content="-" Command="{Binding DataContext.RemoveIntVariableCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding .}" Foreground="Red" ToolTip="ì‚­ì œ"/>
+                                                    </DataTemplate>
+                                                </DataGridTemplateColumn.CellTemplate>
+                                            </DataGridTemplateColumn>
+                                        </DataGrid.Columns>
+                                    </DataGrid>
+                                </DockPanel>
+                            </TabItem>
+                        </TabControl>
+                    </GroupBox>
+
                     <!-- Group Timeout -->
                     <GroupBox Header="ê·¸ë£¹ íƒ€ìž„ì•„ì›ƒ" Margin="0,0,0,15" Padding="10">
                         <StackPanel>
