<rxui:ReactiveUserControl x:Class="Macro.Views.VariableManagerView"
             x:TypeArguments="vm:VariableManagerViewModel"
             xmlns:rxui="clr-namespace:ReactiveUI;assembly=ReactiveUI.Wpf"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vm="clr-namespace:Macro.ViewModels"
             xmlns:views="clr-namespace:Macro.Views"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance Type=vm:VariableManagerViewModel, IsDesignTimeCreatable=False}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="전역 변수 관리 (Global Variable Manager)" FontSize="24" FontWeight="Bold" Margin="0,0,0,20" Foreground="#00796B"/>

        <DataGrid Grid.Row="1" ItemsSource="{Binding DefinedVariables}" AutoGenerateColumns="False" CanUserAddRows="False" Margin="0,0,0,10" BorderThickness="1" BorderBrush="#E0E0E0">
            <DataGrid.Columns>
                <DataGridTextColumn Header="변수명 (Name)" Binding="{Binding Name}" Width="200"/>
                <DataGridTextColumn Header="기본값 (Default Value)" Binding="{Binding DefaultValue}" Width="200"/>
                <DataGridTextColumn Header="설명 (Description)" Binding="{Binding Description}" Width="*"/>
                <DataGridTemplateColumn Width="60">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="❌" 
                                    Command="{Binding DataContext.RemoveVariableCommand, RelativeSource={RelativeSource AncestorType=views:VariableManagerView}}" 
                                    CommandParameter="{Binding .}" 
                                    Background="Transparent" BorderThickness="0" Foreground="Red" FontWeight="Bold"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="+ 변수 추가" Command="{Binding AddVariableCommand}" Padding="15,8" Background="#E0F7FA" FontWeight="Bold" Foreground="#00695C" BorderBrush="#004D40"/>
            <Button Content="저장 (Save)" Command="{Binding SaveCommand}" Padding="15,8" Margin="10,0,0,0" Background="#4CAF50" Foreground="White" FontWeight="Bold"/>
        </StackPanel>
    </Grid>
</rxui:ReactiveUserControl>